# Refactor Stage 1 - Baseline Freeze

## 목표
- 리팩토링 전 핵심 동작을 테스트/체크리스트로 고정한다.
- 이후 모듈 분리 작업에서 기능 회귀 여부를 빠르게 판별한다.

## 자동 검증
- 명령어: `npm test`
- 최소 통과 조건:
  - 날짜 전환/타이머 롤오버 관련 테스트 통과
  - 병합 키 정규화/XSS 방어 테스트 통과
  - 슬롯 생성/시간 파싱/저장 키 관련 기준선 테스트 통과

## 수동 검증 체크리스트
1. 날짜 변경
- `이전/다음/오늘` 버튼과 날짜 입력으로 날짜 이동
- 이동 직후 이전 날짜 화면이 잠깐 남지 않는지 확인

2. 계획 선택/병합
- 계획 칸 단일 선택/드래그 범위 선택 확인
- 병합 후 시간 열/실제 열이 함께 병합되는지 확인
- 병합 해제(되돌리기) 후 값 복원이 깨지지 않는지 확인

3. 타이머
- 오늘 날짜에서만 시작 가능 조건이 적용되는지 확인
- 시작/일시정지/정지 동작 및 정지 시 실제 칸 자동 반영 확인

4. 인라인 계획 입력
- 계획 칸 클릭 시 인라인 드롭다운이 열리는지 확인
- 계획 라벨 선택/수정/삭제 후 화면과 합계가 즉시 반영되는지 확인

5. 활동 상세 기록 모달
- 우측 칸에서 활동 모달 열기/저장/취소 동작 확인
- 세부 활동 시간 합계가 총 시간에 맞게 조정되는지 확인

6. 저장/동기화 표시
- 입력 후 저장 상태 칩이 `저장 중` -> `저장됨`으로 변하는지 확인
- 오프라인/온라인 전환 시 동기화 상태 텍스트 변화 확인

## 기준선 변경 규칙
- Stage 1에서는 기능을 변경하지 않는다.
- 테스트 실패가 발생하면 기능 수정이 아니라 기준선 갱신 필요 여부를 먼저 판단한다.
